# Скрипты 

#### [В ПРОЦЕССЕ] Запуск программы

Скрипт должен иметь функцию `startup` без аргументов.

#### [В ПРОЦЕССЕ] Обработка ввода пользователя `custom_scan`

В настройках базы данных нужно указать путь до файла и название функции, а также указать, сколько последних сообщений должна получить функция.

Единственным аргументом передаётся JSON-строка с историей сообщений.

#### Ответ на ввод пользователя

Выражение в базе данных должно выглядеть так:

```json
{
  "script_path": "путь до файла",
  "func_name": "название функции"
}
```

Единственным аргументом передаётся JSON-объект с запрошенными значениями (см. ниже).

#### [В ПРОЦЕССЕ] Кастомная компоновка результатов сканирования NLPmodule `custom_compose`

Выражение в базе данных должно выглядеть так:

```json
{
  "handle_in_script": "путь до файла",
  "type": "custom_compose",
  "get_hist": "число последних сообщений"
}
```

Скрипт должен иметь функцию `custom_compose` и принимать JSON-объект:

```json
{
  "input": "ввод пользователя",
  "candidates": {
    "c1": ["активатор1", "реагент1", {
      "дополнительное свойство 1": "значение",
      "дополнительное свойство 2": "значение"
    }],
    "c2": ["активатор2", "реагент2"]
  }
}
```

Компоновка автоматически передаётся скрипту из выражения с наибольшим весом, если активатор попал в выборку.

#### [В ПРОЦЕССЕ] Специальные команды `go_action`

Скрипт должен иметь функцию `action_provider`, возвращающий уникальные для конфигурации Джеффа команды, например, `/spotify-tui`, и их краткие описания (до 120 символов), в виде пар ключей-значений. Помимо этого, также должна быть функция `go_action`, которая принимает строку ввода, содержащую в том числе название команды.

# cc-jeff

Данный документ излагает дизайн в понятной форме для дальнейшей разработки.

## Что происходит при запуске

Джефф при запуске должен сделать следующие действия:

1. Считать конфигурацию NLPmodule (список баз данных)
2. Подгрузить кэш для NLPmodule
3. Прочитать настройки модулей на Python (**WIP**)

## TBD

1. Добавить в NLPmodule обработку catching-источников
2. Приоритизированные контейнеры добавляют к своим выражениям 30 единиц веса.
3. Переместить дополнительные свойства в единственную ячейку БД, чтобы они были вместе, и чтобы к ним был доступ из скриптов.

## Старый дизайн

Что должна делать ассоциативная система?

3. использовать различные виды баз данных
6. сценарии
7. модели
8. всё импортируется/экспортируется
11. добавление выражений автоматом +-
    
### Структура данных `Reagent`:
1. активатор
2. ответное выражение
3. список опций и дополнительных параметров
------------------------

1. сделать помощь
Сделать хинты в строке ввода при отсутствии оного в течение определённого времени (про добавление выражений, отключение задержки вывода Jeff, добавление баз данных, скрипты, Ctrl+H для отображения менюбара)
Сделать консольный вывод с ограниченными возможностями
Сделать перевод на языки
Сделать перевод строки на ctrl+enter +-
Сделать меню по нажатию на сообщение
Сделать отключение и удаление источников, добавление props для источника

________________________

Как внедрить Питон:

1. сделать класс, который запускает плагины в отдельных тредах и выдаёт ответ сигналом -
2. сделать пункт в меню, который создаёт сообщение с объяснениями принципов работы и добавлением плагинов

------------------------

`#TODO: подробно описать механизм NLPmodule`  
`#TODO: реализовать необходимые функции NLPmodule`

### PythonModule

1. Метод `notify` или `listen` для всех сообщений Джеффа, чтобы они переходили в скрипты.

Типы действий (для `startup`):
1. `send_to_user`
2. `send_to_nlp`
3. `global_send_from_user`

Короче, надо придумать, чё будет.
Например, если я хочу добавлять разные действия в редакторе источника, тогда нужны соответствующие шаблоны.
Например, шаблон Википедии:
`Найди в Википедии "{}"` - и здесь, например, шаблон числа/строки внутри

То есть нужно изменить ещё и сам NLPmodule, чтобы тот мог работать с регулярными выражениями)

Спецификация дополнительных полей в источниках:
0 - адрес
1 - выражение
2 - ссылки

3 - флаг передачи введённых данных в скрипт
    Если не NULL, передаём данные в `модуль::функция`
4 - флаг
